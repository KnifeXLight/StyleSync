{% extends '/html/base.html' %}

{% block content %}
<div class="container-fluid" style="overflow-x: unset">
    <div class="row flex-nowrap">
      <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0">
        <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 min-vh-100">
          <p class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-decoration-none">
            <span class="fs-5 d-none d-sm-inline">StyleSync</span>
          </p>
          <hr />
          <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
            <li class="nav-item">
              <div id="ww_2a86b77fb94b6" v="1.3" loc="auto" a='{"t":"horizontal","lang":"en","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722","el_whr":3,"el_phw":3}'>
                <a href="https://weatherwidget.org/" id="ww_2a86b77fb94b6_u" target="_blank">Weather widget</a>
              </div>
              <script async src="https://app2.weatherwidget.org/js/?id=ww_2a86b77fb94b6"></script>
            </li>
            <li class="w-100">
              <div>
                <form action="/views/wardrobe/filter" method="post">
                  <div class="accordion w-100 pt-2" id="filterAccordion">
                    {% for category in categories %}
                    <div class="accordion-item w-100">
                      <h2 class="accordion-header" id="heading{{ category.name }}">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ category.name }}" aria-expanded="true" aria-controls="collapse{{ category.name }}">
                          {{ category.name }}
                        </button>
                      </h2>
                      <div id="collapse{{ category.name }}" class="accordion-collapse collapse" aria-labelledby="heading{{ category.name }}" data-bs-parent="#filterAccordion">
                        <div class="accordion-body">
                          {% for filter in category.filters %}
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="{{ filter.id }}" id="filter{{ filter.name }}" name="{{filter.name}}">
                            <label class="form-check-label" for="filter{{ filter.name }}">
                              {{ filter.name }}
                            </label>  
                          </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                  <button type="submit" class="btn btn-primary mt-2">Filter</button>
                  <a href="{{url_for('html.wardrobe')}}" class="btn btn-secondary mt-2">Clear</a>
                </form>
              </div>
            </li>
          </ul>
          <hr />
        </div>
      </div>
      <div class="col py-3">
        <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Outfit ID</th>
                <th scope="col">Created At</th>
                <th scope="col">Rating</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
                {% for outfit in outfits %}
                <tr>
                    <th scope="row">{{ outfit.id }}</th>
                    <td>{{ outfit.id }}</td>
                    <td>{{ outfit.created}}</td>
                    <td>{{ outfit.rating }}</td>
                    <td>
                        <a href="{{ url_for('html.outfit', id=outfit.id) }}" class="btn btn-primary">Edit</a>
                    </td>   
                        
                </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}